<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.7.19 (475949)"/><meta name="author" content="林源"/><meta name="created" content="2019-04-25 23:31:02 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2022-12-09 08:06:41 +0000"/><title>VINS简介</title></head><body><h1 style="font-size: 24px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 24px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">摘要
</span></h1><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">VIO 紧耦合方案是每个VIO系统最重要的组成部分，本篇博客将结合论文和相关代码，对 VINS-Mono 的紧耦合方案作详细分析。
</span></div><h1 style="font-size: 24px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 24px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">概述
</span></h1><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>VIO 紧耦合方案的主要思路就是通过将基于视觉构造的残差项和基于IMU构造的残差项放在一起构造成一个联合优化的问题，整个优化问题的最优解即可认为是比较准确的状态估计。</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">为了限制优化变量的数目，VINS-Mono 采用了滑动窗口的形式，待估计量均为滑动窗口内的状态变量，如下图所示。
</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><a href="https://zhehangt.github.io/2018/04/24/SLAM/VINS/VINSVIO/1.png" style="font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"><img src="VINS%E7%AE%80%E4%BB%8B.resources/47DEFB86-3B7A-4B11-9409-22BC26285EA7.png" height="117" width="460"/><br/></a></div><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>其中需要注意的是 VINS-Mono 中对于地图点的参数化形式。 VINS-Mono 用第一次观测到该地图点的相机坐标系下的逆深度来表示一个地图点，即上图中待估计变量 λ。其总数 m 为滑动窗口内能够观测到的所有地图点的数目。</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">VINS-Mono 中构造了三个残差项。第一项为先验项，第二项是视觉残差项，第三项是 IMU 残差项，如下图所示。
</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><a href="https://zhehangt.github.io/2018/04/24/SLAM/VINS/VINSVIO/2.png" style="font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"><img src="VINS%E7%AE%80%E4%BB%8B.resources/EA8DC574-5CEB-4AD5-9BBF-4143FF718C22.png" height="191" width="581"/><br/></a></div><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>残差项的构造和求解都在函数 <span style="font-size: 13px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;">void Estimator::optimization()</span> 中。</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">滑动窗口内所有待优化变量都保存在一个数组中，如下所示。VINS-Mono 在整个运行过程中的最终目的，就是要通过构造残差项，优化得到准确的状态估计量。
</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"/><col style="width: 639px;"/></colgroup><tbody><tr style="background-color: rgb(249, 249, 249);"><td style="text-align: left; vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">1
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">2
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">3
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">4
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">5
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">6
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">7
</span></div></td><td style="text-align: left; vertical-align: middle; width: 639px; padding: 8px; border: 1px solid;"><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(137, 89, 168);">class</span><span style="font-weight: normal; font-size: 14px;"> Estimator{
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Vector3d Ps[(WINDOW_SIZE + </span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">1</span><span style="font-weight: normal; font-size: 14px;">)]; </span><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//平移</span><span style="font-weight: normal; font-size: 14px;"
/></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Vector3d Vs[(WINDOW_SIZE + </span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">1</span><span style="font-weight: normal; font-size: 14px;">)]; </span><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//速度</span><span style="font-weight: normal; font-size: 14px;"
/></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Matrix3d Rs[(WINDOW_SIZE + </span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">1</span><span style="font-weight: normal; font-size: 14px;">)]; </span><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//旋转</span><span style="font-weight: normal; font-size: 14px;"
/></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Vector3d Bas[(WINDOW_SIZE + </span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">1</span><span style="font-weight: normal; font-size: 14px;">)]; </span><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//加速度偏差</span><span style="font-weight: normal; font-size: 14px;"
/></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Vector3d Bgs[(WINDOW_SIZE + </span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">1</span><span style="font-weight: normal; font-size: 14px;">)]; </span><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//陀螺仪偏差</span><span style="font-weight: normal; font-size: 14px;"
/></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">}
</span></div></td></tr></tbody></table><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">接下来我们来着重分析下这三个残差项是怎么构造的。
</span></div><h1 style="font-size: 24px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 24px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">IMU 残差项
</span></h1><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">首先来看 IMU 的残差项，如下图所示。
</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><a href="https://zhehangt.github.io/2018/04/24/SLAM/VINS/VINSVIO/3.png" style="font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"><img src="VINS%E7%AE%80%E4%BB%8B.resources/36B7B98E-0813-4E4D-A582-BFA3C3B41333.png" height="392" width="626"/><br/></a></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">IMU预计分的具体细节和公式推导就不展开讲了，主要可以参考文献[1]和文献[2]。我们直接给出IMU预积分的处理流程。对于每个IMU数据，需要处理三件事情。</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-en-paragraph:true;">第一</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">，更新当前的预积分量。</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-en-paragraph:true;">第二</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">，更新IMU残差的协防差矩阵。第三，更新IMU残差对于bias的雅克比矩阵。明确了这三件事情之后，我们再来看看 VINS-Mono 是怎么做这三件事情的。
</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">VINS-Mono 中处理 IMU 数据的入口是</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">void Estimator::processIMU(double dt, const Vector3d &amp;linear_acceleration, const Vector3d &amp;angular_velocity)</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">。在</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">void Estimator::processIMU(...)</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">函数中，有个很关键的函数调用就是</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">pre_integrations[frame_count]-&gt;push_back(dt, linear_acceleration, angular_velocity)</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">。在这个函数中，VINS-Mono把上面提到的三件重要的事情全部都做了。滑动窗口内所有预积分的信息保存在</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">IntegrationBase *pre_integrations[(WINDOW_SIZE + 1)]</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">。
</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"/><col style="width: 709px;"/></colgroup><tbody><tr style="background-color: rgb(249, 249, 249);"><td style="text-align: left; vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">1
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">2
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">3
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">4
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">5
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">6
</span></div></td><td style="text-align: left; vertical-align: middle; width: 709px; padding: 8px; border: 1px solid;"><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(137, 89, 168);">class</span><span style="font-weight: normal; font-size: 14px;"> IntegrationBase{
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Eigen::Vector3d delta_p; </span><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//平移预积分</span><span style="font-weight: normal; font-size: 14px;"
/></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Eigen::Quaterniond delta_q; </span><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//旋转预积分</span><span style="font-weight: normal; font-size: 14px;"
/></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Eigen::Vector3d delta_v; </span><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//速度预积分</span><span style="font-weight: normal; font-size: 14px;"
/></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Eigen::Matrix&lt;</span><span style="font-weight: normal; font-size: 14px; color: rgb(137, 89, 168);">double</span><span style="font-weight: normal; font-size: 14px;">, </span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">15</span><span style="font-weight: normal; font-size: 14px;">, </span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">15</span><span style="font-weight: normal; font-size: 14px;">&gt; jacobian, covariance; </span><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//雅可比矩阵和协方差矩阵</span><span style="font-weight: normal; font-size: 14px;"
/></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">}
</span></div></td></tr></tbody></table><div><br/></div><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>首先是更新预积分量。</div><div>需要注意的是，VINS-Mono 在代码中采用了中值积分的方式，与论文中的欧拉积分不同。</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">更新预积分的公式为：
</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><a href="https://zhehangt.github.io/2018/04/24/SLAM/VINS/VINSVIO/4.jpg" style="font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"><img src="VINS%E7%AE%80%E4%BB%8B.resources/FED2D49D-BF48-4789-B72A-F1C1C0D69D6E.jpg" height="204" width="720"/><br/></a></div><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>其次是更新协方差矩阵和雅可比矩阵。</div><div>在误差传播的过程中有这样一种性质，如果能找到状态量的递推公式 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">δ</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.37em, 4.277em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">z</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Regular; line-height: normal;">+</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Regular; line-height: normal;">1</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">F</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">δ</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.37em, 4.277em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">z</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">+</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">G</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">n</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">δzk+1=Fδzk+Gnk</span></div><div>则有协方差 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.61em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">P</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.285em, 1002.08em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">i</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.285em, 1002.08em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.285em, 1002.08em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Regular; line-height: normal;">+</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.285em, 1002.08em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Regular; line-height: normal;">1</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">Pik+1</span> 和 IMU 残差对于bias的雅可比矩阵 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.43em, 4.216em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1001.47em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">i</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1001.47em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1001.47em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Regular; line-height: normal;">+</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1001.47em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Regular; line-height: normal;">1</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">Jik+1b</span> 的递推更新公式：</div><div style="text-align: center; text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px;"><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.61em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">P</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.056em, 1011.36em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">i</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.056em, 1011.36em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.056em, 1011.36em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Regular; line-height: normal;">+</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.056em, 1011.36em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Regular; line-height: normal;">1</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.056em, 1011.36em, 4.521em, -999.997em); top: -4.026em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.67em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">F</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.056em, 1011.36em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.61em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">P</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.056em, 1011.36em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">i</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.056em, 1011.36em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.67em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">F</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.55em, 4.216em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">T</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.43em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.056em, 1011.36em, 4.521em, -999.997em); top: -4.026em; font-family: STIXGeneral-Regular; line-height: normal;">+</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.74em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">G</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.056em, 1011.36em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.61em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">P</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.056em, 1011.36em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">n</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.74em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">G</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.55em, 4.216em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">T</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.43em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.43em, 4.216em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1001.47em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">i</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1001.47em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1001.47em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Regular; line-height: normal;">+</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1001.47em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Regular; line-height: normal;">1</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.995em, 1005.25em, 4.582em, -999.997em); top: -2.378em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.67em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">F</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.995em, 1005.25em, 4.582em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.43em, 4.216em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.61em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">i</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 13.312em; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.61em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">k</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 14px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">Pik+1=FkPikFkT+GkPnGkTJik+1b=FkJikb</span></div><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>其中 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.61em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">P</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">P</span> 表示协方差，<span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.49em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">J</span> 表示IMU预积分残差对于bias的雅可比矩阵。</div><div>在 VINS-Mono 中采用了中值积分的方式计算预积分，递推公式如下：</div><div><a href="https://zhehangt.github.io/2018/04/24/SLAM/VINS/VINSVIO/5.jpg"><img src="VINS%E7%AE%80%E4%BB%8B.resources/637067F6-3BC7-4490-9B62-F10A8A99C97B.jpg" height="341" width="720"/><br/></a></div><div style="margin-top: 1em; margin-bottom: 1em;"><a href="https://zhehangt.github.io/2018/04/24/SLAM/VINS/VINSVIO/6.jpg"><img src="VINS%E7%AE%80%E4%BB%8B.resources/FEBA002C-5902-4AA6-A925-A3E63A01FABA.jpg" height="386" width="720"/></a><span style="-en-paragraph:true;"
/></div><blockquote style="padding: 0px 15px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(221, 221, 221); font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div style="margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">之前一直纠结于 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.67em, 2.628em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">F</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">F</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 和 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.74em, 2.628em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">G</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">G</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 的形式为什么在 VINS-Mono 中和 Foster 的预积分论文中的形式不一样。Foster 的预积分论文中给出了 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.67em, 2.628em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">F</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">F</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 和 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.74em, 2.628em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">G</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">G</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 的完整推导过程。但是 VINS-Mono 直接给出了 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.67em, 2.628em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">F</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">F</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 和 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.74em, 2.628em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">G</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">G</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 的具体形式，并没有给出推导过程。从直观的角度来看，当误差通过 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">δ</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.37em, 4.277em, -999.997em); top: -4.026em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">z</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">k</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">+</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">1</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">F</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">δ</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.37em, 4.277em, -999.997em); top: -4.026em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">z</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">k</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">+</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">G</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.49em, 4.216em, -999.997em); top: -4.026em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">n</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.12em, 2.811em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">k</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">δzk+1=Fδzk+Gnk</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 进行传播时，</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.37em, 4.277em, -999.997em); top: -4.026em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">z</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1000.8em, 2.506em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">k</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">zk</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 和 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.49em, 4.216em, -999.997em); top: -4.026em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">n</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1000.92em, 2.506em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">k</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">nk</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 的变化是通过雅可比矩阵来传播的，因此 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.67em, 2.628em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">F</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">F</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 是当前时刻的状态量 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.37em, 4.277em, -999.997em); top: -4.026em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">z</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1001.65em, 2.506em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">k</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1001.65em, 2.506em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">+</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1001.65em, 2.506em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">1</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">zk+1</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 对上一时刻状态量 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.37em, 4.277em, -999.997em); top: -4.026em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">z</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1000.8em, 2.506em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">k</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">zk</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 的雅可比矩阵，</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.74em, 2.628em, -999.997em); top: -2.439em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">G</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">G</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 是当前时刻的状态量 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.37em, 4.277em, -999.997em); top: -4.026em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">z</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1001.65em, 2.506em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">k</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1001.65em, 2.506em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">+</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1001.65em, 2.506em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">1</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">zk+1</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 对上一时刻误差项 </span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.49em, 4.216em, -999.997em); top: -4.026em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">n</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1000.92em, 2.506em, -999.997em); top: -3.904em; color: rgb(102, 102, 102); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">k</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">nk</span><span style="color: rgb(102, 102, 102); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 的雅可比矩阵。参考知乎上的一个答案，这部分的推导应该可以从参考文献[2]中找到。待进一步学习。
</span></div></blockquote><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">VINS-Mono 关于 IMU 误差项的定义在 </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">imu_factor.h</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 中。这里在提一下 Ceres 对于残差的计算，如下
</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"/><col style="width: 879px;"/></colgroup><tbody><tr style="background-color: rgb(249, 249, 249);"><td style="text-align: left; vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">1
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">2
</span></div></td><td style="text-align: left; vertical-align: middle; width: 879px; padding: 8px; border: 1px solid;"><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Eigen::Matrix&lt;</span><span style="font-weight: normal; font-size: 14px; color: rgb(137, 89, 168);">double</span><span style="font-weight: normal; font-size: 14px;">, </span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">15</span><span style="font-weight: normal; font-size: 14px;">, </span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">15</span><span style="font-weight: normal; font-size: 14px;">&gt; sqrt_info = Eigen::LLT&lt;Eigen::Matrix&lt;</span><span style="font-weight: normal; font-size: 14px; color: rgb(137, 89, 168);">double</span><span style="font-weight: normal; font-size: 14px;">, </span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">15</span><span style="font-weight: normal; font-size: 14px;">, </span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">15</span><span style="font-weight: normal; font-size: 14px;">&gt;&gt;(pre_integration-&gt;covariance.inverse()).matrixL().transpose();
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">residual = sqrt_info * residual;
</span></div></td></tr></tbody></table><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">为了保证 IMU 和 视觉參差项在尺度上保持一致，一般会采用与量纲无关的马氏距离，即 </span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1002.87em, 2.628em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">T</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.61em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">P</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1002.87em, 2.628em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">−</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1002.87em, 2.628em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">1</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1002.87em, 2.628em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">eTP−1e</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> ，但这明显与 VINS-Mono 代码中不一致。这是因为ceres只接受最小二乘优化, 也就是 </span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1001.35em, 2.628em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">T</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1001.35em, 2.628em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">eTe</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 。为了将欧式距离转换为马氏距离，首先得把 </span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.61em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">P</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.102em, 1001.53em, 2.323em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">−</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.102em, 1001.53em, 2.323em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">1</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">P−1</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 做LLT分解，即 </span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.61em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">P</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1004.52em, 2.628em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">−</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1004.52em, 2.628em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">1</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1004.52em, 2.628em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">=</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1004.52em, 2.628em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">L</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.55em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">L</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1004.52em, 2.628em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">T</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">P−1=LLT</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> , 因此有 </span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">T</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.61em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">P</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">−</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">1</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">=</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">T</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">L</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.55em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">L</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">T</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">=</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">(</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.55em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">L</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">T</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.31em, 4.399em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">)</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">T</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">(</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.55em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">L</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">T</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1013.68em, 2.811em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">)</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">eTP−1e=eTLLTe=(LTe)T(LTe)</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> , 令 </span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1003.61em, 2.628em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1003.61em, 2.628em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">′</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1003.61em, 2.628em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">=</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.55em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">L</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1003.61em, 2.628em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">T</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1003.61em, 2.628em, -999.997em); top: -2.439em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">e</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">e′=LTe</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;"> 作为新的优化误差, 这样就能用ceres求解了。</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">Eigen::LLT&lt;Eigen::Matrix&lt;double, 15, 15&gt;&gt;(pre_integration-&gt;covariance.inverse()).matrixL().transpose()</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">这一行代码其实就是代表将</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.61em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">P</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.102em, 1001.53em, 2.323em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">−</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.102em, 1001.53em, 2.323em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Regular; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">1</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">P−1</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">作LLT分解，然后取</span><span style="font-size: 16.38px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.55em, 4.216em, -999.997em); top: -4.026em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">L</span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.102em, 1001.16em, 2.323em, -999.997em); top: -4.393em; color: rgb(85, 85, 85); font-family: STIXGeneral-Italic; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;-en-paragraph:true;">T</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: normal; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); overflow-wrap: normal; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; overflow: hidden !important;-en-paragraph:true;">LT</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">。
</span></div><h1 style="font-size: 24px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 24px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">视觉残差项
</span></h1><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>视觉的残差项在 SLAM 系统中都大同小异，但在 VINS-Mono 中要注意两点。<span style="font-weight: bold;">第一</span>是 VINS-Mono 中对于地图点的参数化形式，即<span style="font-weight: bold;">逆深度</span>的形式。<span style="font-weight: bold;">第二</span>是残差的计算。残差的计算给出了两种形式，第一种是在归一化平面上的重投影误差，这种误差更常见，也更好理解。第二种是把归一化平面上的重投影误差投影到Unit sphere的误差。论文中给出的是第二种，而代码中两种误差都保留了，并用宏<span style="font-size: 13px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;">UNIT_SPHERE_ERROR</span>进行控制。误差计算公式是写成这样的：</div><div style="margin-top: 1em; margin-bottom: 1em;"><a href="https://zhehangt.github.io/2018/04/24/SLAM/VINS/VINSVIO/7.png"><img src="VINS%E7%AE%80%E4%BB%8B.resources/4CFF3AB7-220B-4F50-9830-F19A5231838C.png" height="257" width="557"/></a><span style="-en-paragraph:true;"
/></div><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>代码是写成这样的：</div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"/><col style="width: 941px;"/></colgroup><tbody><tr style="background-color: rgb(249, 249, 249);"><td style="text-align: left; vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">1
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">2
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">3
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">4
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">5
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">6
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">7
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">8
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">9
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">10
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">11
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">12
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">13
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">14
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">15
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">16
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">17
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">18
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">19
</span></div></td><td style="text-align: left; vertical-align: middle; width: 941px; padding: 8px; border: 1px solid;"><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//i时刻相机坐标系下的map point的逆深度</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(137, 89, 168);">double</span><span style="font-weight: normal; font-size: 14px;"> inv_dep_i = parameters[</span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">3</span><span style="font-weight: normal; font-size: 14px;">][</span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">0</span><span style="font-weight: normal; font-size: 14px;">];
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//i时刻相机坐标系下的map point坐标</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Eigen::Vector3d pts_camera_i = pts_i / inv_dep_i;
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//i时刻IMU坐标系下的map point坐标</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Eigen::Vector3d pts_imu_i = qic * pts_camera_i + tic;
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//世界坐标系下的map point坐标</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Eigen::Vector3d pts_w = Qi * pts_imu_i + Pi;
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//在j时刻imu坐标系下的map point坐标</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Eigen::Vector3d pts_imu_j = Qj.inverse() * (pts_w - Pj);
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(142, 144, 140);">//在j时刻相机坐标系下的map point坐标</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Eigen::Vector3d pts_camera_j = qic.inverse() * (pts_imu_j - tic);
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">Eigen::Map&lt;Eigen::Vector2d&gt; residual(residuals);
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(137, 89, 168);">#ifdef UNIT_SPHERE_ERROR</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">residual = tangent_base * (pts_camera_j.normalized() - pts_j.normalized());
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(137, 89, 168);">#else</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(137, 89, 168);">double</span><span style="font-weight: normal; font-size: 14px;"> dep_j = pts_camera_j.z();
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">residual = (pts_camera_j / dep_j).head&lt;</span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">2</span><span style="font-weight: normal; font-size: 14px;">&gt;() - pts_j.head&lt;</span><span style="font-weight: normal; font-size: 14px; color: rgb(113, 140, 0);">2</span><span style="font-weight: normal; font-size: 14px;">&gt;();
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px; color: rgb(137, 89, 168);">#endif</span></div></td></tr></tbody></table><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">把归一化平面上的重投影误差投影到Unit sphere上的好处就是可以支持所有类型的相机。对于成像在平面上的相机，直接计算投影在x轴和y轴坐标的差是没有问题的，但是如果是成像在曲面上的相机，直接计算投影在x轴和y轴坐标的差往往是不够准确的，所以要转换到Unit sphere。这部分的实际效果还有待进一步验证。
</span></div><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>在最新版本的 VINS-Mono 中，还添加了对 imu-camera 时间戳不完全同步和 Rolling shutter 相机的支持。主要的思路就是通过前端光流计算得到每个角点在归一化的速度，根据 imu-camera时间戳的时间同步误差和Rolling shutter相机做一次rolling的时间，对角点的归一化坐标进行调整。</div><div>这部分代码在<span style="font-size: 13px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;">projection_td_factor.h</span>文件中。其实这里面最关键的代码就两行。</div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"/><col style="width: 848px;"/></colgroup><tbody><tr style="background-color: rgb(249, 249, 249);"><td style="text-align: left; vertical-align: middle; width: 130px; padding: 8px; border: 1px solid;"><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">1
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">2
</span></div></td><td style="text-align: left; vertical-align: middle; width: 848px; padding: 8px; border: 1px solid;"><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">pts_i_td = pts_i - (td - td_i + TR / ROW * row_i) * velocity_i;
</span></div><div style="font-size:14px;"><span style="font-weight: normal; font-size: 14px;">pts_j_td = pts_j - (td - td_j + TR / ROW * row_j) * velocity_j;
</span></div></td></tr></tbody></table><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">其中</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">pts_i</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">是角点在归一化平面的坐标，</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">td</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">表示imu-camera时间戳的时间同步误差，是待优化项。</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">TR</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">表示Rolling shutter相机做一次rolling的时间。因为在处理imu数据的时候，已经减过一次时间同步误差，因此修正后的时间误差是</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">td - td_i</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">。其次</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">row_i</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">是角点图像坐标的纵坐标，</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">ROW</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">图像坐标纵坐标的最大值，因此</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">TR / ROW * row_i</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">就是相机 rolling 到这一行时所用的时间。</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">velocity_i</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">是该角点在归一化平面的运动速度。所以最后得到的</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">pts_i_td</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">是处理时间同步误差和Rolling shutter时间后，角点在归一化平面的坐标。
</span></div><h1 style="font-size: 24px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 24px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">先验残差项
</span></h1><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>先验残差项是所有残差项里面最复杂的一部分，但是又是不可或缺的。我们先从宏观的角度来分析这个先验残差项到底在干什么。</div><div>之前我们提到，为了限制优化变量的数目，VINS-Mono 采用了滑动窗口的形式，待估计量均为滑动窗口内的状态变量。当有新的图像帧加入到滑动窗口中，需要去除滑动窗口内一个旧的图像帧以及相关的状态量，以保证滑动窗口内的状态量数目保持稳定。VINS-Mono根据当前帧是否为关键帧，会执行两种不同的滑动窗口的策略。滑窗策略留到下一章节再讨论，但不管执行哪种滑窗策略，都会从滑动窗口中删除某个图像帧，而这个图像帧通过 <span style="font-weight: bold;">IMU 预积分</span>和观测到某些<span style="font-weight: bold;">地图点</span>，会与滑动窗口内的某些其他图像帧之间产生约束关系，如果直接把该图像帧从滑动窗口内删除，会白白丢失这些约束关系，从而降低滑动窗口内状态量的优化结果。那么怎么才能即丢掉某个图像帧，只优化滑动窗口内的状态量，又保留这个丢掉的图像帧与滑动窗口内图像帧状态量之间的约束关系呢？这个时候就要派出神器—<span style="font-weight: bold;">边缘化</span> (Marginalization) 。先验残差项就是通过边缘化得到的。这部分的知识主要参考了贺一家大神的博客[4][5]。关于构造边缘化残差项的数学知识很多，这里我简单引用一下边缘化的结论。假设需要边缘化的变量为 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1001.04em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">xm</span>，也就是对应上面提到的滑窗过程中要被丢掉的图像帧的状态量。需要求解的变量为<span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1000.86em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">xb</span>，即对应滑动窗口内所有的状态量。如果不丢弃<span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1001.04em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">xm</span>，在求解残差 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1001.53em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Regular; line-height: normal;">min</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.544em, 1000.31em, 4.338em, -999.997em); top: -3.355em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">e</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">f</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">(</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">)</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">minxe=f(x)</span> 的最小值时，用高斯牛顿方法将构造 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1003.48em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1003.48em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">δ</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1003.48em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1003.48em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1003.48em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">Hδx=b</span>，然后用 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.92em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">δ</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.92em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">δx</span> 去更新 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.835em, 1000.43em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">x</span> ，得到一个更准确的状态估计。然而现在要丢弃 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1001.04em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">xm</span>，只估计 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1000.86em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">xb</span>。 因此可以把 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1003.48em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1003.48em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">δ</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1003.48em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1003.48em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1003.48em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">Hδx=b</span> 写成另外一种形式</div><div style="text-align: center; text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px;"><br/></div><div style="text-align: center; text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px;"><div>[HmmHbmHTbmHbb][xmxb]=[bmbb][HmmHbmTHbmHbb][xmxb]=[bmbb]</div><div><br/></div><div><br/></div></div><div style="text-align: center; text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px;"><span style="font-size: 16px;"><br/></span></div><div>通过高斯消元可以变成如下形式：</div><div><br/></div><div style="text-align: center; text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px;"><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.323em, 1024.12em, 5.742em, -999.997em); top: -4.27em; font-family: STIXSizeFourSym; line-height: normal;">[</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1001.84em, 4.399em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1001.84em, 4.399em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -3.172em; font-family: STIXGeneral-Regular; line-height: normal;">0</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.55em, 4.216em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">T</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.92em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.92em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.933em, 1007.82em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.933em, 1007.82em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.933em, 1007.82em, 4.521em, -999.997em); top: -3.172em; font-family: STIXGeneral-Regular; line-height: normal;">−</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.55em, 4.216em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">T</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.92em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.92em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.92em, 4.338em, -999.997em); top: -4.454em; font-family: STIXGeneral-Regular; line-height: normal;">−</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.92em, 4.338em, -999.997em); top: -4.454em; font-family: STIXGeneral-Regular; line-height: normal;">1</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.544em, 1001.1em, 4.216em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.544em, 1001.1em, 4.216em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.933em, 1007.82em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.933em, 1007.82em, 4.521em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.323em, 1024.12em, 5.742em, -999.997em); top: -4.27em; font-family: STIXSizeFourSym; line-height: normal;">]</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.323em, 1024.12em, 5.742em, -999.997em); top: -4.27em; font-family: STIXSizeThreeSym; line-height: normal;">[</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.422em, 1001.04em, 4.399em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.422em, 1000.86em, 4.399em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.323em, 1024.12em, 5.742em, -999.997em); top: -4.27em; font-family: STIXSizeThreeSym; line-height: normal;">]</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.323em, 1024.12em, 5.742em, -999.997em); top: -4.27em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.323em, 1024.12em, 5.742em, -999.997em); top: -4.27em; font-family: STIXSizeThreeSym; line-height: normal;">[</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1001.1em, 4.399em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.933em, 1006.66em, 4.399em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.933em, 1006.66em, 4.399em, -999.997em); top: -3.172em; font-family: STIXGeneral-Regular; line-height: normal;">−</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.933em, 1006.66em, 4.399em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.92em, 4.338em, -999.997em); top: -4.454em; font-family: STIXGeneral-Regular; line-height: normal;">−</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.361em, 1000.92em, 4.338em, -999.997em); top: -4.454em; font-family: STIXGeneral-Regular; line-height: normal;">1</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.544em, 1001.1em, 4.216em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.544em, 1001.1em, 4.216em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.933em, 1006.66em, 4.399em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 12px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.933em, 1006.66em, 4.399em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 16.38px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; clip: rect(2.323em, 1024.12em, 5.742em, -999.997em); top: -4.27em; font-family: STIXSizeThreeSym; line-height: normal;">]</span><span style="text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; font-size: 14px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">[HmmHbmT0Hbb−HbmTHmm−1Hbm][xmxb]=[bmbb−bmHmm−1Hbm]</span></div><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>也就是说通过构造 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">(</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">−</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.55em, 4.216em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">T</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.92em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.92em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.92em, 4.338em, -999.997em); top: -4.454em; font-family: STIXGeneral-Regular; line-height: normal;">−</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.92em, 4.338em, -999.997em); top: -4.454em; font-family: STIXGeneral-Regular; line-height: normal;">1</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.544em, 1001.1em, 4.216em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.544em, 1001.1em, 4.216em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">)</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">δ</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">−</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.92em, 4.338em, -999.997em); top: -4.454em; font-family: STIXGeneral-Regular; line-height: normal;">−</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.92em, 4.338em, -999.997em); top: -4.454em; font-family: STIXGeneral-Regular; line-height: normal;">1</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.544em, 1001.1em, 4.216em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.544em, 1001.1em, 4.216em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.346em, 1017.77em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">(Hbb−HbmTHmm−1Hbm)δxb=bb−bmHmm−1Hbm</span> 的方式求解 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1001.35em, 2.811em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">δ</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1001.35em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">δxb</span>，然后更新<span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1000.86em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">xb</span> ，完全可以达到即丢弃 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1001.04em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">xm</span>，又保留其与 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1000.86em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">xb</span> 之间的约束关系。</div><div>先验残差项将被构造成 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">e</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(0.919em, 1008.25em, 3.3em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">p</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(0.919em, 1008.25em, 3.3em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">r</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(0.919em, 1008.25em, 3.3em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">i</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(0.919em, 1008.25em, 3.3em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">o</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(0.919em, 1008.25em, 3.3em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">r</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(0.919em, 1008.25em, 3.3em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">i</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(0.919em, 1008.25em, 3.3em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.37em, 4.216em, -999.997em); top: -4.698em; font-family: STIXGeneral-Regular; line-height: normal;">1</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -3.355em; font-family: STIXGeneral-Regular; line-height: normal;">2</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(2.872em, 1003.36em, 4.704em, -999.997em); top: -3.355em; font-family: STIXGeneral-Regular; line-height: normal;">∣</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(2.872em, 1003.36em, 4.704em, -999.997em); top: -2.805em; font-family: STIXGeneral-Regular; line-height: normal;">∣</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.86em, 4.399em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.43em, 3.91em, -999.997em); top: -4.332em; font-family: STIXGeneral-Regular; line-height: normal;">^</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(2.872em, 1003.36em, 4.704em, -999.997em); top: -4.026em; font-family: STIXGeneral-Regular; line-height: normal;">−</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(2.872em, 1003.36em, 4.704em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(2.872em, 1003.36em, 4.704em, -999.997em); top: -3.355em; font-family: STIXGeneral-Regular; line-height: normal;">∣</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(2.872em, 1003.36em, 4.704em, -999.997em); top: -2.805em; font-family: STIXGeneral-Regular; line-height: normal;">∣</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(0.919em, 1008.25em, 3.3em, -999.997em); top: -4.698em; font-family: STIXGeneral-Regular; line-height: normal;">2</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">epriori=12|xb^−xb|2</span>。因此 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1001.53em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Regular; line-height: normal;">min</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.544em, 1000.31em, 4.338em, -999.997em); top: -3.355em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">e</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">f</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">(</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1004.89em, 3.422em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">)</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">minxe=f(x)</span> 就可以等价于 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1001.53em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Regular; line-height: normal;">min</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.544em, 1000.31em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.544em, 1000.61em, 4.399em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">e</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">e</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">p</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">r</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">i</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">o</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">r</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">i</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">+</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">f</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">(</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1008.67em, 3.544em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">)</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">minxbe=epriori+f(xb)</span>。优化变量从 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.835em, 1000.43em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">x</span> 变成了 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1000.86em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">xb</span>。</div><div>接下来再着重分析一下 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.8em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">H</span> 矩阵。在高斯牛顿法中，<span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.8em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">H</span> 是用 雅可比矩阵 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.49em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">J</span> 来近似的，即 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1003.67em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1003.67em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1003.67em, 2.628em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">T</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.407em, 1003.67em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">H=JTJ</span>，那么当对 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.8em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">H</span> 进行分解得到 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1005.86em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1005.86em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1005.86em, 2.811em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">,</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1005.86em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1005.86em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1005.86em, 2.811em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">,</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1005.86em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1005.86em, 2.811em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">Hmm,Hbm,Hbb</span> 对应到 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.49em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">J</span> 上是什么东西？其实 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.59em, 1000.49em, 2.628em, -999.997em); top: -2.439em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">J</span> 本身可以拆解为两个部分，第一部分是残差对于 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1001.04em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">xm</span> 的雅可比矩阵，用 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.285em, 1001.04em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">Jm</span>表示，第二部分是残差对于 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.422em, 1000.43em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">x</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.529em, 1000.86em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">xb</span> 的雅可比矩阵，用<span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.285em, 1000.86em, 2.506em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">Jb</span>表示。则有 <span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.55em, 4.216em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">T</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.544em, 1000.61em, 4.216em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">,</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.55em, 4.216em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">T</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.43em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">m</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">,</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.8em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">H</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -2.439em; font-family: STIXGeneral-Regular; line-height: normal;">=</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.55em, 4.216em, -999.997em); top: -4.393em; font-family: STIXGeneral-Italic; line-height: normal;">T</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.361em, 1000.43em, 4.216em, -999.997em); top: -3.721em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 16.38px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(3.178em, 1000.49em, 4.216em, -999.997em); top: -4.026em; font-family: STIXGeneral-Italic; line-height: normal;">J</span><span style="font-size: 12px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; clip: rect(1.468em, 1016em, 2.933em, -999.997em); top: -3.904em; font-family: STIXGeneral-Italic; line-height: normal;">b</span><span style="font-size: 14px; text-indent: 0px; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; top: 0px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden !important; line-height: normal;">Hmm=JmTJm,Hbm=JbTJm,Hbb=JbTJb</span>。</div><div>理论部分大致是这样的原理，但对应到 VINS-Mono 的源码中，这将是一个非常复杂的过程。</div><div>但总体上先验残差项的构造可以分为以下几个步骤：</div><div>1.把上一次先验项中的残差项传递给当前先验项，并从中去除需要丢弃的状态量</div><div>2.添加与当前需要丢弃的状态量相关的约束项</div><div>3.通过函数<span style="font-size: 13px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;">void MarginalizationInfo::preMarginalize()</span>得到每个残差项对应的参数块，雅可比矩阵，残差值。</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">4.通过函数</span><span style="font-size: 13px; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(85, 85, 85); font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace;-en-paragraph:true;">void MarginalizationInfo::marginalize()</span><span style="-en-paragraph:true;">将步骤3中得到的雅可比矩阵和残差值进行组合，得到整个先验项的参数块，雅可比矩阵和残差值。
</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">通过以上四步先验项就算构造完成了，在对滑动窗口内的状态量进行优化时，把它与 IMU 残差项和视觉残差项放在一起优化，从而得到不丢失历史信息的最新状态估计的结果。
</span></div><h1 style="font-size: 24px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 24px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">滑窗策略
</span></h1><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">根据当前帧是否为关键帧，VINS-Mono 中将会采用两种不同的策略。这两种策略可以用下图解释：
</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><a href="https://zhehangt.github.io/2018/04/24/SLAM/VINS/VINSVIO/8.png" style="font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"><img src="VINS%E7%AE%80%E4%BB%8B.resources/F241E383-C5C1-4150-9503-B8376AB546AC.png" height="374" width="675"/><br/></a></div><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>如果当前帧<span style="font-weight: bold;">是关键帧</span>，则丢弃滑动窗口内最老的图像帧，同时对与该图像帧关联的约束项进行边缘化处理。这里需要注意的是，如果该关键帧是观察到某个地图点的第一帧，则需要把该地图点的深度转移到后面的图像帧中去。</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">如果当前帧</span><span style="font-weight: bold;-en-paragraph:true;">不是关键帧</span><span style="-en-paragraph:true;">，则丢弃当前帧的前一帧。因为判定当前帧不是关键帧的条件就是当前帧与前一帧视差很小，也就是说当前帧和前一帧很相似，这种情况下直接丢弃前一帧，然后用当前帧代替前一帧。为什么这里可以不对前一帧进行边缘化，而是直接丢弃，原因就是当前帧和前一帧很相似，因此当前帧与地图点之间的约束和前一帧与地图点之间的约束是很接近的，直接丢弃并不会造成整个约束关系丢失信息。这里需要注意的是，要把当前帧和前一帧之间的 IMU 预积分转换为当前帧和前二帧之间的 IMU 预积分。
</span></div><h1 style="font-size: 24px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 24px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">参考文献
</span></h1><p style="color: rgb(85, 85, 85); font-family: Lato, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div>[1] On-Manifold Preintegration for Real-Time Visual-Inertial Odometry</div><div>[2] Quaternion kinematics for the error-state Kalman filter</div><div>[3] <a href="https://www.zhihu.com/question/64381223" style="outline: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(204, 204, 204); overflow-wrap: break-word; color: rgb(85, 85, 85);">https://www.zhihu.com/question/64381223</a></div><div>[4] <a href="https://blog.csdn.net/heyijia0327/article/details/53707261" style="outline: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(204, 204, 204); overflow-wrap: break-word; color: rgb(85, 85, 85);">https://blog.csdn.net/heyijia0327/article/details/53707261</a></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">[5] </span><a href="https://blog.csdn.net/heyijia0327/article/details/52822104" style="outline: none; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(204, 204, 204); overflow-wrap: break-word; color: rgb(85, 85, 85);-en-paragraph:true;">https://blog.csdn.net/heyijia0327/article/details/52822104</a><span style="-en-paragraph:true;"
/></div><div><br/></div></body></html>